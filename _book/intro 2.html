<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Biostatics for Public Health - 1&nbsp; Data Manipulation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./descriptives.html" rel="next">
<link href="./preface.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./intro.html">Fundamentals</a></li><li class="breadcrumb-item"><a href="./intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Manipulation</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Biostatics for Public Health</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Manipulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./descriptives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphical.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Graphical Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introduction to Inferential Statistics</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Regression Methods</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">1.1</span> Overview</a></li>
  <li><a href="#rstudio" id="toc-rstudio" class="nav-link" data-scroll-target="#rstudio"><span class="header-section-number">1.3</span> RStudio</a></li>
  <li><a href="#scripts" id="toc-scripts" class="nav-link" data-scroll-target="#scripts"><span class="header-section-number">1.4</span> Scripts</a>
  <ul class="collapse">
  <li><a href="#accessing-help" id="toc-accessing-help" class="nav-link" data-scroll-target="#accessing-help"><span class="header-section-number">1.4.1</span> Accessing help</a></li>
  <li><a href="#browsing-help" id="toc-browsing-help" class="nav-link" data-scroll-target="#browsing-help"><span class="header-section-number">1.4.2</span> Browsing help</a></li>
  </ul></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">1.5</span> Packages</a></li>
  <li><a href="#objects-in-r" id="toc-objects-in-r" class="nav-link" data-scroll-target="#objects-in-r"><span class="header-section-number">1.6</span> Objects in <code>R</code></a>
  <ul class="collapse">
  <li><a href="#short-cuts" id="toc-short-cuts" class="nav-link" data-scroll-target="#short-cuts"><span class="header-section-number">1.6.1</span> Short-cuts</a></li>
  <li><a href="#assignments" id="toc-assignments" class="nav-link" data-scroll-target="#assignments"><span class="header-section-number">1.6.2</span> Assignments</a></li>
  <li><a href="#pipe-work-flow" id="toc-pipe-work-flow" class="nav-link" data-scroll-target="#pipe-work-flow"><span class="header-section-number">1.6.3</span> Pipe-work flow</a></li>
  </ul></li>
  <li><a href="#generating-data" id="toc-generating-data" class="nav-link" data-scroll-target="#generating-data"><span class="header-section-number">1.7</span> Generating data</a>
  <ul class="collapse">
  <li><a href="#categorical-variables-factors" id="toc-categorical-variables-factors" class="nav-link" data-scroll-target="#categorical-variables-factors"><span class="header-section-number">1.7.1</span> Categorical variables: Factors</a></li>
  <li><a href="#labels" id="toc-labels" class="nav-link" data-scroll-target="#labels"><span class="header-section-number">1.7.2</span> Labels</a></li>
  </ul></li>
  <li><a href="#saving-r-data-frames" id="toc-saving-r-data-frames" class="nav-link" data-scroll-target="#saving-r-data-frames"><span class="header-section-number">1.8</span> Saving <code>R</code> data frames</a></li>
  <li><a href="#variables-in-data-frames" id="toc-variables-in-data-frames" class="nav-link" data-scroll-target="#variables-in-data-frames"><span class="header-section-number">1.9</span> Variables in data frames</a></li>
  <li><a href="#export-and-import-objects" id="toc-export-and-import-objects" class="nav-link" data-scroll-target="#export-and-import-objects"><span class="header-section-number">1.10</span> Export and import objects</a></li>
  <li><a href="#data-manipulation" id="toc-data-manipulation" class="nav-link" data-scroll-target="#data-manipulation"><span class="header-section-number">1.11</span> Data manipulation</a>
  <ul class="collapse">
  <li><a href="#defining-factors" id="toc-defining-factors" class="nav-link" data-scroll-target="#defining-factors"><span class="header-section-number">1.11.1</span> Defining factors</a></li>
  <li><a href="#transforming-to-a-binary-variable" id="toc-transforming-to-a-binary-variable" class="nav-link" data-scroll-target="#transforming-to-a-binary-variable"><span class="header-section-number">1.11.2</span> Transforming to a binary variable</a></li>
  <li><a href="#simple-numeric-transformations" id="toc-simple-numeric-transformations" class="nav-link" data-scroll-target="#simple-numeric-transformations"><span class="header-section-number">1.11.3</span> Simple numeric transformations</a></li>
  <li><a href="#changing-the-reference-for-factors" id="toc-changing-the-reference-for-factors" class="nav-link" data-scroll-target="#changing-the-reference-for-factors"><span class="header-section-number">1.11.4</span> Changing the reference for factors</a></li>
  <li><a href="#labels-1" id="toc-labels-1" class="nav-link" data-scroll-target="#labels-1"><span class="header-section-number">1.11.5</span> Labels</a></li>
  <li><a href="#indexing-and-subsets" id="toc-indexing-and-subsets" class="nav-link" data-scroll-target="#indexing-and-subsets"><span class="header-section-number">1.11.6</span> Indexing and subsets</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data Manipulation</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-mesagge="false">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstatix)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easystats)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pubh)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjPlot)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjmisc)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>import<span class="sc">::</span><span class="fu">from</span>(latex2exp, TeX)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(sjPlot<span class="sc">::</span><span class="fu">theme_sjplot2</span>(<span class="at">base_size =</span> <span class="dv">10</span>))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_update</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">'huxtable.knit_print_df'</span> <span class="ot">=</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="st">'huxtable.autoformat_number_format'</span> <span class="ot">=</span> <span class="fu">list</span>(<span class="at">numeric =</span> <span class="st">"%5.2f"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="overview" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">1.1</span> Overview</h2>
<p>The first step in data analysis that involves <code>R</code> will be acquiring your data in an appropriate format, either by entering it directly into <code>R</code>, importing it from a spreadsheet or other format, or by opening a pre-existing <code>R</code> data file.</p>
<p>In this laboratory, we will look at performing simple data handling in <code>R</code>. The most important part of this lab is to get you familiar with the software.</p>
<p>Once you have completed this lab, you should feel comfortable:</p>
<ul>
<li>Creating variables in <code>R</code>.</li>
<li>Understanding the difference between continuous variables and categorical ones (factors).</li>
<li>Transforming data (e.g., converting from pounds to kilograms, calculating BMIs from weights and heights, log transformations, etc.).</li>
<li>Extracting subsets of your data.</li>
<li>Assigning labels to variables and categories within variables.</li>
<li>Saving your data.</li>
<li>Using <code>R</code>’s help system.</li>
<li>Importing data in <code>R</code> from an Excel spreadsheet.</li>
<li>Creating script files.</li>
</ul>
<blockquote class="blockquote">
<h2 id="summary-of-new-commands" data-number="1.2" class="anchored"><span class="header-section-number">1.2</span> Summary of New Commands</h2>
</blockquote>
<table class="table">
<colgroup>
<col style="width: 22%">
<col style="width: 14%">
<col style="width: 62%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Command</strong></th>
<th><strong>Library</strong></th>
<th><strong>Function</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>%$%</strong></td>
<td><em>magrittr</em></td>
<td>Exposition pipe operator</td>
</tr>
<tr class="even">
<td><strong>%&gt;%</strong></td>
<td><em>magrittr</em></td>
<td>Forward pipe operator</td>
</tr>
<tr class="odd">
<td><strong>%in%</strong></td>
<td><em>base</em></td>
<td>Value matching</td>
</tr>
<tr class="even">
<td><strong>as_tibble</strong></td>
<td><em>tibble</em></td>
<td>Coerces objects into tibbles</td>
</tr>
<tr class="odd">
<td><strong>c</strong></td>
<td><em>base</em></td>
<td>Concatenates values</td>
</tr>
<tr class="even">
<td><strong>copy_labels</strong></td>
<td><em>sjlabelled</em></td>
<td>Copies labels from a data frame</td>
</tr>
<tr class="odd">
<td><strong>count</strong></td>
<td><em>dplyr</em></td>
<td>Counts observations by group</td>
</tr>
<tr class="even">
<td><strong>data</strong></td>
<td><em>base</em></td>
<td>Loads data from <code>R</code> packages</td>
</tr>
<tr class="odd">
<td><strong>factor</strong></td>
<td><em>base</em></td>
<td>Defines <em>factors</em></td>
</tr>
<tr class="even">
<td><strong>filter</strong></td>
<td><em>dplyr</em></td>
<td>Filters data frames, given conditions</td>
</tr>
<tr class="odd">
<td><strong>freq_table</strong></td>
<td><em>rstatix</em></td>
<td>Frequency tables for categorical variables</td>
</tr>
<tr class="even">
<td><strong>frq</strong></td>
<td><em>sjmisc</em></td>
<td>Frequency tables for categorical variables</td>
</tr>
<tr class="odd">
<td><strong>glimpse</strong></td>
<td><em>tibble</em></td>
<td>Displays information about a dataset</td>
</tr>
<tr class="even">
<td><strong>head</strong></td>
<td><em>base</em></td>
<td>First rows of a data frame</td>
</tr>
<tr class="odd">
<td><strong>help (?)</strong></td>
<td><em>base</em></td>
<td>Help function</td>
</tr>
<tr class="even">
<td><strong>install.packages</strong></td>
<td><em>utils</em></td>
<td>Installs packages in the system</td>
</tr>
<tr class="odd">
<td><strong>is.factor</strong></td>
<td><em>base</em></td>
<td>Evaluates if a variable is a factor or not</td>
</tr>
<tr class="even">
<td><strong>library</strong></td>
<td><em>base</em></td>
<td>Loads (attaches) functions from a package</td>
</tr>
<tr class="odd">
<td><strong>length</strong></td>
<td><em>base</em></td>
<td>Number of observations in a variable</td>
</tr>
<tr class="even">
<td><strong>levels</strong></td>
<td><em>base</em></td>
<td>Levels of categorical variables</td>
</tr>
<tr class="odd">
<td><strong>mutate</strong></td>
<td><em>dplyr</em></td>
<td>Transforms/generates variables</td>
</tr>
<tr class="even">
<td><strong>mean</strong></td>
<td>base</td>
<td>Calculates the arithmetic mean</td>
</tr>
<tr class="odd">
<td><strong>max</strong></td>
<td>base</td>
<td>Calculates maximum value</td>
</tr>
<tr class="even">
<td><strong>names</strong></td>
<td><em>base</em></td>
<td>Column names of variables in a data frame</td>
</tr>
<tr class="odd">
<td><strong>nrow</strong></td>
<td><em>base</em></td>
<td>Number of rows (observations) in data frames</td>
</tr>
<tr class="even">
<td><strong>read_csv</strong></td>
<td><em>readr</em></td>
<td>Loads files with <code>csv</code> format/extension</td>
</tr>
<tr class="odd">
<td><strong>read_rds</strong></td>
<td><em>readr</em></td>
<td>Loads RDS files</td>
</tr>
<tr class="even">
<td><strong>relevel</strong></td>
<td><em>base</em></td>
<td>Changes the reference category</td>
</tr>
<tr class="odd">
<td><strong>rep</strong></td>
<td><em>base</em></td>
<td>Replicates numbers or characters</td>
</tr>
<tr class="even">
<td><strong>rm</strong></td>
<td><em>base</em></td>
<td>Deletes (<em>removes</em>) objects from the workspace</td>
</tr>
<tr class="odd">
<td><strong>round</strong></td>
<td><em>base</em></td>
<td>Rounds variables</td>
</tr>
<tr class="even">
<td><strong>RSiteSearch</strong></td>
<td><em>utils</em></td>
<td>Searches <code>R</code> functions in the web</td>
</tr>
<tr class="odd">
<td><strong>select</strong></td>
<td><em>dplyr</em></td>
<td>Selects variables from a data frame or tibble</td>
</tr>
<tr class="even">
<td><strong>setwd</strong></td>
<td><em>base</em></td>
<td>Sets the working directory (path)</td>
</tr>
<tr class="odd">
<td><strong>tibble</strong></td>
<td><em>tibble</em></td>
<td>Constructs <em>tibbles</em></td>
</tr>
<tr class="even">
<td><strong>var_labels</strong></td>
<td><em>sjlabelled</em></td>
<td>Assigns labels to variables</td>
</tr>
<tr class="odd">
<td><strong>View</strong></td>
<td><em>utils</em></td>
<td>Displays data frames</td>
</tr>
<tr class="even">
<td><strong>which</strong></td>
<td><em>base</em></td>
<td>Finds the positions where the stated conditionals are true</td>
</tr>
<tr class="odd">
<td><strong>which.max</strong></td>
<td><em>base</em></td>
<td>Finds the position of the maximum value</td>
</tr>
<tr class="even">
<td><strong>with</strong></td>
<td><em>base</em></td>
<td>Evaluates commands in a defined data frame or tibble</td>
</tr>
<tr class="odd">
<td><strong>write_csv</strong></td>
<td><em>readr</em></td>
<td>Exports files with <code>csv</code> format/extension</td>
</tr>
<tr class="even">
<td><strong>write_rds</strong></td>
<td><em>readr</em></td>
<td>Writes RDS files</td>
</tr>
</tbody>
</table>
</section>
<section id="rstudio" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="rstudio"><span class="header-section-number">1.3</span> RStudio</h2>
<p>A typical session on <code>RStudio</code> would look something like <a href="graphical.html#fig-fig1">Figure&nbsp;<span>3.1</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-fig1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/RStudio.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1.1: <code>RStudio</code> displaying a typical <code>.Rmd</code> Markdown script file on the top left corner.</figcaption>
</figure>
</div>
</div>
</div>
<p><code>RStudio</code> can have up to four panels open (displaying information):</p>
<ol type="1">
<li><strong>Source</strong> panel (top left). This panel shows the <em>script</em> files.</li>
<li><strong>Console</strong> panel (bottom left). This panel is where you interact with the program to perform an analysis. It shows the path of the current working directory at the top.</li>
<li><strong>Workspace</strong> panel (top right). You can select what to show in here. In <a href="graphical.html#fig-fig1">Figure&nbsp;<span>3.1</span></a>, it shows information about the workspace, like currently loaded objects (<em>Environment</em>) and the <em>History</em> of our commands.</li>
<li><strong>Display</strong> panel (bottom right). You can select what to show in here. In <a href="graphical.html#fig-fig1">Figure&nbsp;<span>3.1</span></a>, it shows <em>Files</em>, the <em>Help</em> files, generated <em>Plots</em>, <em>Packages</em> available on your <code>R</code> installation and the <em>Viewer</em>.</li>
</ol>
</section>
<section id="scripts" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="scripts"><span class="header-section-number">1.4</span> Scripts</h2>
<p>Files that document our analysis are known as <em>scripts</em>, and they open on the <em>Source</em> panel. The standard script file has a <code>.R</code> extension and can be opened with any text editor.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-fig2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/Script.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1.2: Example of a <code>.R</code> script document.</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="graphical.html#fig-fig2">Figure&nbsp;<span>3.2</span></a> displays an example of a <em>script</em> file. These kind of files are intended to be read by <code>R</code>, so any text that is not part of a command, has to be <em>commented</em>. <code>R</code> will interpret anything written after a <code>#</code> (on the same line) as a comment.</p>
<p>Let’s clarify the first set of lines from the script file, as shown in <a href="graphical.html#fig-fig2">Figure&nbsp;<span>3.2</span></a>.</p>
<ol type="1">
<li>The first line is a comment and gives the name of the file, so, it is not needed, but it is good to have.</li>
<li>The second line is a comment about the content of the script. It can be a short or long description. The important thing to remember is that once that you start a new line, for example for writing a different paragraph, you would need to include the <code>#</code> symbol at the beginning of each new line.</li>
<li>The third line is a comment about the author.</li>
<li>The fourth line is a comment about the date.</li>
<li>The sixth line sets the working directory. As explained in the preface, this can be done with the menus and it’s not needed when working in <code>R</code> projects.</li>
<li>Line 7 loads the <code>pubh</code> package.</li>
<li>Line 9 estimates measures of association of the <em>exposure</em> <code>treat</code> on the <em>outcome</em> <code>fate</code> from the <code>Bernard</code> data set. ## Notebooks</li>
</ol>
<p>The disadvantage of <code>.R</code> scripts is that you cannot produce a single document with both the analysis and the results of such analysis. Notebooks, permit us to record text, commands and results (including plots). We will be using Notebooks to document our analysis on both <em>PUBH 725</em> and <em>PUBH 726</em>.</p>
<p>We will start by creating a mock notebook, using the template that comes with the <code>pubh</code> package <span class="citation" data-cites="pubh">(<a href="references.html#ref-pubh" role="doc-biblioref">Athens 2020</a>)</span>. Open <code>RStudio</code> and select <code>File &gt; New File &gt; R Markdown...</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>For this paper, I will use the term of <strong>Notebooks</strong> for R Markdown (<code>.Rmd</code>) documents. Do NOT select <code>File &gt; New File &gt; R Notebook</code> to create the Notebook.</p>
</div>
</div>
<p>A window will pop-up like the one shown in <a href="graphical.html#fig-fig3">Figure&nbsp;<span>3.3</span></a>, select: <code>From Template &gt; PUBH Template</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-fig3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/Notebook1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1.3: Window for creating a new <code>R</code> Markdown file (Notebook).</figcaption>
</figure>
</div>
</div>
</div>
<p>Click <code>OK</code> or type the <code>Return</code> key. Have a look at the template; we will edit the script later. For the moment, Let’s run the template as it is. To execute the Notebook, you only need to click on the <code>Knit</code> button which can be found in the <em>Source</em> panel. When you click <em>knit</em> (see <strong>1</strong> in <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>) for the first time, it will ask for a name to save your file. Give a name like <em>Lab1</em>. The result will appear on the <em>Display</em> panel, and two files will be created: <em>Lab1.Rmd</em> is the script, and <em>Lab1.html</em> is the output that you can open with any web browser.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Word can also open <em>html</em> files.</p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-fig4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/SourcePanel.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1.4: Source panel for a Notebook. The following parts are highlighted: <strong>1.</strong> The <em>Knit</em> button to <em>compile</em> the file. <strong>2.</strong> The <em>Insert</em> button to insert <code>R</code> code. <strong>3.</strong> The <em>Run</em> button to pass <em>chunks</em> to the console. <strong>4</strong> The <em>Outline</em> and <em>Markup</em> buttons. <strong>5.</strong> The desired output of the document. <strong>6.</strong> Cog button to access chunk options and buttons for running the <em>chunk</em>.</figcaption>
</figure>
</div>
</div>
</div>
<p>Let’s create the Notebook for the first laboratory. Change the title to <em>Data management</em> and edit the author field.</p>
<p>Codes are inserted in sections called <em>chunks</em> or <em>blocks</em>. Go to the end of the script and click on <code>Insert &gt; R</code> (see <strong>2</strong> in <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>). Your cursor will be, by default, where you can insert your commands. The easiest thing to do is just to copy from the lab book and paste the code in the chunk.</p>
<p>In <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>, the option <code>message = FALSE</code> was added to the first chunk, to hide messages from the output. You can change the options from a chunk by clicking on the <em>Cog button</em> (see <strong>6</strong> in <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>). Compile the <em>RMardown</em> script by clicking on the <em>Knit</em> button (see <strong>1</strong> in <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>).</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>For a quick reference on Markdown, go to <code>Help &gt; Markdown Quick Reference</code>.</p>
</div>
</div>
<p>When you <em>Knit</em> the document, it compiles the full document and displays the results on the <em>Display</em> panel. Sometimes, we want to check a particular command. For doing that, you can <em>transfer</em> your command from the <em>script</em> file by clicking on the small green arrow at the right of the code (see <strong>3</strong> and <strong>6</strong> in <a href="graphical.html#fig-fig4">Figure&nbsp;<span>3.4</span></a>). Depending on your preferences, the results will show on the <em>Console</em> panel or directly in your script file.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The console has no history of what you <em>knit</em>, that means that if you are testing a particular code, on a dataset that has not been loaded yet on the <em>Console</em> panel, you will have an error message. To keep it safe, if you want to work in an interactive way with the <em>Console</em>, run each <em>chunk</em> as you progress and <em>knit</em> only when you want to look at the whole document.</p>
</div>
</div>
<section id="accessing-help" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="accessing-help"><span class="header-section-number">1.4.1</span> Accessing help</h3>
<p>When you do not know about the specific options or syntax of a particular command, you can access the help files. For example, Let’s say you want to learn more about the <code>mean</code> function. One way is to use the <code>help</code> command is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>::: callout-::: {.notes} The general syntax for a command in <code>R</code> is: <code>command(object, options)</code>; where <code>command</code> is a function available on the current loaded <code>R</code> packages or created for the current session. :::</p>
<p>As an alternative, we can use the question mark, without any parenthesis as in:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>?sd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s important that you get familiar with help files. At the end of each help file, you can see some examples. You can select a particular example and then type Ctrl + Return (Windows) or Command + Return (Macintosh) to transfer the selection to the console.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>The help will only look for documentation on functions that are part of the <strong>attached</strong> packages.</li>
<li>Use the <code>help</code> command <strong>only</strong> in the Console panel. <strong>DO NOT</strong> include <code>help</code> commands as part of your script files.</li>
</ol>
</div>
</div>
<p>When we do not know the name of the function, or it may be part of a package that is installed in the computer, but not loaded yet, you can search by using double question marks. For example, Let’s say that you would like to know how to perform diagnostic tests (e.g., sensitivity, specificity, etc.), in that case, you would type (please note the use of quotes):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>?? <span class="st">"diagnostic tests"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we use <code>??</code> the system searches for functions associated with current installed packages. When we need to make a further search on the web, we can use <code>RSiteSearch</code> in the <em>Console</em> panel. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RSiteSearch</span>(<span class="st">"meta-analysis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Exercise:</strong> Find out what the <code>names</code> command does.</p>
<p><strong>Answer:</strong> Gives the names from an <code>R</code> object. We use this to know the variables contained in a given dataset (<code>data.frame</code> or <code>tibble</code> in <code>R</code>).</p>
</blockquote>
</section>
<section id="browsing-help" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="browsing-help"><span class="header-section-number">1.4.2</span> Browsing help</h3>
<p>Other times, you just want to browse the functions of a particular package of interest, to find new commands. For example, go to the <strong>Display</strong> panel and select the <strong>Packages</strong> tab. Look for the package <code>pubh</code> and click on it. A help file will open with the description of all functions and data that are part of that package. You can click on any of the listed functions to gather more information. Some packages have also <strong>Vignettes</strong> which are more helpful as they guide you to the use of the functions contained in the package.</p>
<p>In the help file of <code>pubh</code> click on <code>User guides, package vignettes and other documentation</code>. Next, select the first one: <code>Introduction to the pubh package</code>. You do not have to read through that vignette today, but now you know how to access vignettes.</p>
</section>
</section>
<section id="packages" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="packages"><span class="header-section-number">1.5</span> Packages</h2>
<p>When you open <code>R</code>, it loads a standard number of <em>packages</em>, each one of them includes a particular set of functions and data. We can extend the number of available functions by loading more packages into the system.</p>
<p>When you start with the template provided by the <code>pubh</code> package, the first chunk loads recommended packages for <em>PUBH 725</em> and <em>PUBH 726</em> into the session. When loading a package <em>required</em> packages are also automatically attached.</p>
<p>In particular, when loading <code>pubh</code> the following packages are loaded too:</p>
<ul>
<li><code>emmeans</code></li>
<li><code>ggformula</code></li>
<li><code>magrittr</code></li>
<li><code>huxtable</code></li>
<li><code>gtsummary</code></li>
</ul>
<p>The <code>tidyverse</code> loads a collection of packages:</p>
<ul>
<li><code>dplyr</code></li>
<li><code>forcats</code></li>
<li><code>ggplot2</code></li>
<li><code>purrr</code></li>
<li><code>readr</code></li>
<li><code>stringr</code></li>
<li><code>tibble</code></li>
<li><code>tidyr</code></li>
</ul>
<p>When we load package <code>easystats</code> the following packages are loaded:</p>
<ul>
<li><code>insight</code></li>
<li><code>bayestestR</code></li>
<li><code>parameters</code></li>
<li><code>modelbased</code></li>
<li><code>see</code></li>
<li><code>datawizard</code></li>
<li><code>effectsize</code></li>
<li><code>correlation</code></li>
<li><code>report</code></li>
</ul>
<p>Sometimes, we would like to load more packages either because of a particular function or because we would like to access data from that library. We use the function <code>library</code> to load a package; for example, to load the <code>ISwR</code> package (ISwR stands for <em>Introductory Statistics with R</em>), we type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISwR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A list of most of the available <code>R</code> packages can be found at the <a href="https://cran.r-project.org/">CRAN</a> web page, under <em>Packages</em>. Libraries associated with Bioinformatics can be found at the <a href="http://www.bioconductor.org/">Bioconductor</a> web page. Finally, packages organised by topic, can be found <a href="https://cran.r-project.org/web/views/">here</a>.</p>
<p>To install a new package, you can go to the <em>Display</em> panel, and click on <em>Install</em> under the <em>Packages</em> tab.</p>
<p>Another option is to type the command in the <em>Console</em> panel. For example, to install the <code>epibasix</code> package we type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"epibasix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="objects-in-r" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="objects-in-r"><span class="header-section-number">1.6</span> Objects in <code>R</code></h2>
<section id="short-cuts" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="short-cuts"><span class="header-section-number">1.6.1</span> Short-cuts</h3>
<p>The following are important short-cuts that we can use in <code>RStudio</code>:</p>
<table class="table">
<thead>
<tr class="header">
<th>Function</th>
<th>Output</th>
<th>MacOS Short-cut</th>
<th>Windows Short-cut</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Assignment</td>
<td><code>&lt;-</code></td>
<td><code>Option -</code></td>
<td><code>Alt -</code></td>
</tr>
<tr class="even">
<td>Pipe</td>
<td><code>%&gt;%</code></td>
<td><code>Shift Command M</code></td>
<td><code>Shift Ctl M</code></td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup>
<col style="width: 46%">
<col style="width: 27%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Action</th>
<th>MacOS Short-cut</th>
<th>Windows Short-cut</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Insert Chunk</td>
<td><code>Option Command I</code></td>
<td><code>Alt Ctl I</code></td>
</tr>
<tr class="even">
<td>Run line/selection</td>
<td><code>Command Return</code></td>
<td><code>Ctl Return</code></td>
</tr>
<tr class="odd">
<td>Formats text selection as <code>code</code></td>
<td><code>Command D</code></td>
<td><code>Ctl D</code></td>
</tr>
</tbody>
</table>
</section>
<section id="assignments" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="assignments"><span class="header-section-number">1.6.2</span> Assignments</h3>
<p>An excellent introduction to <code>R</code> and its objects, can be found in the first chapter of <span class="citation" data-cites="iswr">(<a href="references.html#ref-iswr" role="doc-biblioref">Dalgaard 2008</a>)</span>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>From now on, copy all the <code>R</code> commands in your script file (your <em>RMarkdown</em> Notebook). Be free to add text to comment or to change options or variables.</p>
</div>
</div>
<p>A variable that holds a number or character is known as a <em>scalar</em>. Assignments are done with <code>&lt;-</code> with no space between the two symbols. Assignments can also be done using the equal <code>=</code> symbol. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>When a variable, holds 2 or more numbers or characters, is called a <em>vector</em>. For example, a vector of 3 weights (in pounds) is generated using the command <code>c</code> (concatenate):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">151.45</span>, <span class="dv">194</span>, <span class="fl">121.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The advantage of vectors is that operations become faster than performing single operations. For example, let’s say that we want to convert the weight in pounds to kg, and we do not want to have another variable, so just replace the old one. One kg equals 2.2046 pounds:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>weight <span class="ot">=</span> weight<span class="sc">/</span><span class="fl">2.2046</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 68.69727 87.99782 54.99864</code></pre>
</div>
</div>
<p>There is no way we could measure human weight with that accuracy using standard devices, so let’s round the values. First, look at the help file of <code>round</code>. The default is <code>digits = 0</code> (i.e., no decimals). We are going to keep one decimal. As <code>round</code> has no other option, we can directly type the value of <code>x</code> (our <em>object</em>) and the number of digits. In other occasions, for clarity, we will type things like <code>digits = 1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(weight, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 68.7 88.0 55.0</code></pre>
</div>
</div>
</section>
<section id="pipe-work-flow" class="level3" data-number="1.6.3">
<h3 data-number="1.6.3" class="anchored" data-anchor-id="pipe-work-flow"><span class="header-section-number">1.6.3</span> Pipe-work flow</h3>
<p><code>R</code> is a computer language, thus, functions are performed from the most nested ones, to the less ones. For example, if we want to estimate the mean value of the vector of weights that we created, and report only one digit, we write:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">mean</span>(weight, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 70.6</code></pre>
</div>
</div>
<p>When we have several parentheses, it’s easy to get lost on the code. One option is to use a pipe-work flow. Package <code>magrittr</code> uses the command <code>%&gt;%</code> to pass information in what is known as <em>pipe-work flow</em>. In this case, commands are simply read from left to right and top to bottom:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>weight <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 70.6</code></pre>
</div>
</div>
<p>To <em>remove</em> (clear) objects from the workspace, we use <code>rm</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(x, weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="generating-data" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="generating-data"><span class="header-section-number">1.7</span> Generating data</h2>
<p>For small datasets, the easiest thing to do is to generate the data directly in <code>R</code>. We will start by entering some data of our own. This particular dataset describes the levels of uric acid in the bloodstream of twenty subjects aged from 21 to 25. There were five individuals with each combination of Down’s syndrome being present/absent and sex being male/female.</p>
<p>The variable <code>uric</code> contains the values for the uric acid, the variable <code>downs</code> contains numerical values for Down’s syndrome (0 = “No”, 1 = “Yes”) and the variable <code>sex</code> contains numerical values representing sex (0 = “Male”, 1 = “Female”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="ot">=</span> <span class="fu">tibble</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">uric =</span> <span class="fu">c</span>(<span class="fl">5.84</span>, <span class="fl">6.3</span>, <span class="fl">6.95</span>, <span class="fl">5.92</span>, <span class="fl">7.94</span>, <span class="fl">5.5</span>, <span class="fl">6.08</span>, <span class="fl">5.12</span>, <span class="fl">7.58</span>, <span class="fl">6.78</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="fl">4.9</span>, <span class="fl">6.95</span>, <span class="fl">6.73</span>, <span class="fl">5.32</span>, <span class="fl">4.81</span>, <span class="fl">4.94</span>, <span class="fl">7.2</span>, <span class="fl">5.22</span>, <span class="fl">4.6</span>, <span class="fl">3.88</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">downs =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>)),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">10</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We used the <code>rep</code> (replicate) command for both <code>downs</code> and <code>sex</code>. In the case of <code>downs</code>, it alternates 5 zeros (meaning “No”) and 5 ones (meaning “Yes”). For sex, we are entering the males first (10 of them) and the females later (10 of them).</p>
<p>The most common way to work with data sets in <code>R</code> are <code>data.frames</code>. A data frame is a rectangular object in which all components (variables) have the same length. A data frame can have variables of different nature (character, logical, double, etc), but each one of them of a single nature and all of them of the same length. A modern version of data frames are <code>tibbles</code>.</p>
<p>We can look at all columns but only the first rows of the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="sc">|&gt;</span> <span class="fu">head</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
   uric downs   sex
  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  5.84     0     0
2  6.3      0     0
3  6.95     0     0
4  5.92     0     0
5  7.94     0     0
6  5.5      1     0</code></pre>
</div>
</div>
<section id="categorical-variables-factors" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="categorical-variables-factors"><span class="header-section-number">1.7.1</span> Categorical variables: Factors</h3>
<p>When we defined the data set <code>uric_down</code>, we used only numbers. Both <code>downs</code> and <code>sex</code> are categorical variables. A categorical variable in <code>R</code> is known as <code>factor</code>. Each <code>factor</code> contains two or more <code>levels</code> or <em>categories</em>.</p>
<p>To convert the variable <code>sex</code> from the data set <code>uric_down</code> to a factor we use the command <code>factor</code> indicating the names of the <code>levels</code> for each category in the same order as the corresponding sequence of numbers.</p>
<p>In this kind of operation, we need to give information of the variable, the name of the dataset and the actual function with options. One way to accomplish this, would be (please do <strong>NOT</strong> run):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>uric_down<span class="sc">$</span>sex <span class="ot">=</span> <span class="fu">factor</span>(uric_down<span class="sc">$</span>sex, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you understood the instructions, you did NOT run the previous code! Alas, we need to explain.</p>
<p>The name of the variable is <code>sex</code> and the name of the dataset is <code>uric_down</code>. We use the <code>$</code> symbol to give an address, like saying:</p>
<blockquote class="blockquote">
<p><em>Variable <code>sex</code> lives at <code>uric_down</code>.</em></p>
</blockquote>
<p>We would need to do something similar to convert <code>downs</code> to a <code>factor</code>.</p>
<p>We will use a different approach, one more elegant, modern and <em>posh</em> (just saying!). We will use a pipe-workflow to transform variables.</p>
<p>Package <code>magrittr</code> introduced the concept of <em>pipes</em> in <code>R</code>; it’s like passing information between objects and functions. The symbol to <em>pass</em> or <em>pipe</em> the information is <code>%&gt;%</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>In some cases, when a function (usually an old function) does not contain <code>data</code> as part of its arguments, we use <code>%$%</code> instead.</p>
</div>
</div>
<p>For the conversion to factors, we use the function <code>mutate</code> from the <code>dplyr</code> package.</p>
<p>Let’s transform <code>downs</code> and <code>sex</code> from numerical (<code>double</code>) to categorical (<code>factor</code>) variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>uric_down2 <span class="ot">=</span> uric_down <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">downs =</span> <span class="fu">factor</span>(downs, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>)),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">factor</span>(sex, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>uric_down2 <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
   uric downs sex  
  &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;
1  5.84 No    Male 
2  6.3  No    Male 
3  6.95 No    Male 
4  5.92 No    Male 
5  7.94 No    Male 
6  5.5  Yes   Male </code></pre>
</div>
</div>
</section>
<section id="labels" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="labels"><span class="header-section-number">1.7.2</span> Labels</h3>
<p>We would also like to display more information than the current variable name, in tables and figures. To accomplish this, we associate <code>labels</code> with variables. We will use <code>var_labels</code> from the <code>sjlabelled</code> package. Notice, that the way we assign labels is similar to the one we used for transformations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>uric_down2 <span class="ot">=</span> uric_down2 <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">uric =</span> <span class="st">"Uric acid (mg/dl)"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">downs =</span> <span class="st">"Down's syndrome"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="st">"Sex"</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For small datasets (like our current one) it is easier to make the transformation and the labelling as part of the same pipe-workflow.</p>
<p>We had not modified the original data set <code>uric_down</code>, instead, we created a new one <code>uric_down2</code>, so we could go one step at a time. You can remove <code>uric_down2</code> with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(uric_down2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To do both, transformation and labelling in the same pipe-workflow, we type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="ot">=</span> uric_down <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">downs =</span> <span class="fu">factor</span>(downs, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>)),</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">factor</span>(sex, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">uric =</span> <span class="st">"Uric acid (mg/dl)"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">downs =</span> <span class="st">"Down's syndrome"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="st">"Sex"</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="saving-r-data-frames" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="saving-r-data-frames"><span class="header-section-number">1.8</span> Saving <code>R</code> data frames</h2>
<p>The advantage of saving data frames as <code>R</code> data (<code>.rds</code>) is that <code>R</code> will have access to factors, levels and labels. I will save the data on the subdirectory <em>data</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(uric_down, <span class="st">"data/uric_down.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you are following instructions, you have everything recorded in your script in case you did something wrong. To show how to import, we will remove all objects associated with the data frame first:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(uric_down)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To load the data, we use <code>read_rds</code> and assign the file to a new object (in this case, a tibble). For simplicity, I use the same name of the file as the name of the new data frame, but you can change that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="ot">=</span> <span class="fu">read_rds</span>(<span class="st">"data/uric_down.rds"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>uric_down <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
   uric downs sex  
  &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;
1  5.84 No    Male 
2  6.3  No    Male 
3  6.95 No    Male 
4  5.92 No    Male 
5  7.94 No    Male 
6  5.5  Yes   Male </code></pre>
</div>
</div>
</section>
<section id="variables-in-data-frames" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="variables-in-data-frames"><span class="header-section-number">1.9</span> Variables in data frames</h2>
<p>The <code>uric_down</code> data frame has three variables. <code>R</code> can have more than one data frame loaded on the same session, that feature has the disadvantage that we need to tell <code>R</code> where to find individual variables.</p>
<p>For example, <code>uric_down</code> has a vector (variable) named <code>sex</code>. We could have another data frame which also has the variable <code>sex</code>, how do we know which one we are analysing? We have to give information of both the data frame and the vector. One way is by using the <code>$</code> symbol. The syntax is:</p>
<p><strong>data$vector</strong></p>
<p>For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>uric_down<span class="sc">$</span>sex</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] Male   Male   Male   Male   Male   Male   Male   Male   Male   Male  
[11] Female Female Female Female Female Female Female Female Female Female
attr(,"label")
[1] Sex
Levels: Male Female</code></pre>
</div>
</div>
<p>Another option is to <strong>select</strong> the variables (columns) we are interested in:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, downs) <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">frq</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sex (sex) &lt;categorical&gt; 
# total N=20 valid N=20 mean=1.50 sd=0.51

Value  |  N | Raw % | Valid % | Cum. %
--------------------------------------
Male   | 10 |    50 |      50 |     50
Female | 10 |    50 |      50 |    100
&lt;NA&gt;   |  0 |     0 |    &lt;NA&gt; |   &lt;NA&gt;

Down's syndrome (downs) &lt;categorical&gt; 
# total N=20 valid N=20 mean=1.50 sd=0.51

Value |  N | Raw % | Valid % | Cum. %
-------------------------------------
No    | 10 |    50 |      50 |     50
Yes   | 10 |    50 |      50 |    100
&lt;NA&gt;  |  0 |     0 |    &lt;NA&gt; |   &lt;NA&gt;</code></pre>
</div>
</div>
<p>An alternative to <code>$</code> is the function <code>with</code>. The syntax is: <code>with(data, function(x))</code>. For example, if we want to know if <code>sex</code> is a factor we can type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(uric_down, <span class="fu">is.factor</span>(sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Or using pipes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="sc">%$%</span> <span class="fu">is.factor</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>The same command using the <code>$</code> symbol:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(uric_down<span class="sc">$</span>sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>attach</code> command allows to access variables within data frames directly, however, it’s not convenient when you work with more than one data set on the same session.</p>
</div>
</div>
<p>In the current example, the last command was simpler but in many cases is better to use <code>%&gt;%</code>.</p>
</section>
<section id="export-and-import-objects" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="export-and-import-objects"><span class="header-section-number">1.10</span> Export and import objects</h2>
<p>To export a data frame (or other objects) to <em>Excel</em>, we will write <code>.csv</code> files (comma-separated values). In the following code, the file will be saved in the subdirectory <code>data</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(uric_down, <span class="st">"data/uric_down.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For importing data from <em>Excel</em>, remember to:</p>
<ol type="1">
<li>Don’t use complicated names for the variables, in particular:</li>
</ol>
<ul>
<li>Don’t start a variable name with a number.</li>
<li>Don’t leave spaces as part of the name, e.g.&nbsp;don’t use <code>blood pressure</code>. Some alternatives are:
<ul>
<li><code>blood_pressure</code></li>
<li><code>bp</code></li>
<li><code>blood.pressure</code></li>
<li><code>BloodPressure</code></li>
</ul></li>
</ul>
<ol start="2" type="1">
<li>Don’t use a long, complicated name for the name of your file; it is better to avoid spaces.</li>
<li>Don’t leave cells blank (without any information). For missing data, we will type <code>NA</code>.</li>
<li>It is easier to record only numbers and to add labels on <code>R</code> later, to avoid mistakes on the names (it’s not the same <code>female</code>, <code>Female</code>, or <code>female</code> with a blank space before the <code>f</code>).</li>
<li>Export your data as <em>comma-separated values</em> (.csv).</li>
</ol>
<p>Let’s load our data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>uric_down <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"data/uric_down.csv"</span>, <span class="at">col_types =</span> <span class="st">"dff"</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>uric_down <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 20
Columns: 3
$ uric  &lt;dbl&gt; 5.84, 6.30, 6.95, 5.92, 7.94, 5.50, 6.08, 5.12, 7.58, 6.78, 4.90…
$ downs &lt;fct&gt; No, No, No, No, No, Yes, Yes, Yes, Yes, Yes, No, No, No, No, No,…
$ sex   &lt;fct&gt; Male, Male, Male, Male, Male, Male, Male, Male, Male, Male, Fema…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>It’s also possible to load <em>.csv</em> files using <code>read.csv</code>.</li>
<li>When we use <code>read.csv</code> the data is loaded as a data frame, whereas when we use <code>read_csv</code> the data is loaded as a tibble.</li>
<li>For data frames (using <code>read.csv</code>), variables with characters are transformed directly as factor, hence the command: <code>uric_down = read.csv("data/uric_down.csv")</code> would be enough.</li>
<li>For tibbles (using <code>read_csv</code>), variables with characters remain characters unless we declare them as factor. The argument: <code>col_types = "dff"</code> indicates that the first variable is a <em>double</em> and the next two are <em>factors</em>.</li>
</ol>
<p>Another way to import datasets is by going to the <strong>Environment</strong> tab, under the <strong>Workspace</strong> panel. There you can go to <code>Import Dataset &gt; From CSV...</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>The following strategy is recommended:</strong></p>
<ol type="1">
<li>Load all your data in an Excel spreadsheet, remembering all points mentioned earlier.</li>
<li>Save your data in Excel format and also export it as a <code>.csv</code> file.</li>
<li>Import your data in <code>R</code>.</li>
<li>Define factors and labels.</li>
<li>Once you are happy with your data, save it as a <code>.rds</code> file with <code>write_rds</code>.</li>
<li>Perform your analysis with your data and document everything on a script file.</li>
</ol>
</div>
</div>
</section>
<section id="data-manipulation" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="data-manipulation"><span class="header-section-number">1.11</span> Data manipulation</h2>
<p>In most cases you start by inspecting your data, cleaning, defining factors and making transformations. As mentioned in the section before, your data will come from a spreadsheet. In this paper, we will use data contained in <code>R</code> <em>packages</em> most of the time.</p>
<p>First read the help file for the dataset <code>wcgs</code> by typing: <code>?epitools::wcgs</code> in the <strong>Console</strong> panel.</p>
<p>We use the function <code>data</code> to load data from <code>R</code> <em>packages</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(wcgs, <span class="at">package =</span> <span class="st">"epitools"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(wcgs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"      "age0"    "height0" "weight0" "sbp0"    "dbp0"    "chol0"  
 [8] "behpat0" "ncigs0"  "dibpat0" "chd69"   "typechd" "time169" "arcus0" </code></pre>
</div>
</div>
<p>The first thing I would like to do is to change the name of the variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> <span class="fu">as_tibble</span>(wcgs)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(wcgs) <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"id"</span>, <span class="st">"age"</span>, <span class="st">"height"</span>, <span class="st">"weight"</span>, <span class="st">"sbp"</span>, <span class="st">"dbp"</span>,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"chol"</span>, <span class="st">"beh_pat"</span>, <span class="st">"ncigs"</span>, <span class="st">"dib_pat"</span>, <span class="st">"chd"</span>,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"type_chd"</span>, <span class="st">"time"</span>, <span class="st">"arcus"</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">%&gt;%</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "id"       "age"      "height"   "weight"   "sbp"      "dbp"     
 [7] "chol"     "beh_pat"  "ncigs"    "dib_pat"  "chd"      "type_chd"
[13] "time"     "arcus"   </code></pre>
</div>
</div>
<section id="defining-factors" class="level3" data-number="1.11.1">
<h3 data-number="1.11.1" class="anchored" data-anchor-id="defining-factors"><span class="header-section-number">1.11.1</span> Defining factors</h3>
<p>Now, we define categorical variables as factors. By default, the value zero is our reference.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">chd =</span> <span class="fu">factor</span>(chd, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No CHD"</span>, <span class="st">"CHD"</span>)),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">arcus =</span> <span class="fu">factor</span>(arcus, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Absent"</span>, <span class="st">"Present"</span>)),</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">beh_pat =</span> <span class="fu">factor</span>(beh_pat, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"A1"</span>, <span class="st">"A2"</span>, <span class="st">"B3"</span>, <span class="st">"B4"</span>)),</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">dib_pat =</span> <span class="fu">factor</span>(dib_pat, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"B"</span>, <span class="st">"A"</span>)),</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_chd =</span> <span class="fu">factor</span>(type_chd, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No CHD"</span>, <span class="st">"MI or SD"</span>, <span class="st">"Angina"</span>, <span class="st">"Silent MI"</span>))</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="transforming-to-a-binary-variable" class="level3" data-number="1.11.2">
<h3 data-number="1.11.2" class="anchored" data-anchor-id="transforming-to-a-binary-variable"><span class="header-section-number">1.11.2</span> Transforming to a binary variable</h3>
<p>One of our variables is a count and stores the number of smoked cigarettes/day. We can define a new variable <code>Smoker</code> in which, everyone who smokes one or more cigarette/day will be a smoker. One of the easiest ways to create binary variables is to use a <em>conditional</em> statement. For example, the result of <code>wcgs$ncigs &gt; 0</code> is a vector with <code>TRUE</code> and <code>FALSE</code> results.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">smoker =</span> <span class="fu">factor</span>(ncigs <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Non-Smoker"</span>, <span class="st">"Smoker"</span>))</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="simple-numeric-transformations" class="level3" data-number="1.11.3">
<h3 data-number="1.11.3" class="anchored" data-anchor-id="simple-numeric-transformations"><span class="header-section-number">1.11.3</span> Simple numeric transformations</h3>
<p>We also, prefer units in the metric system. We will convert from inches to centimetres and from pounds to kg.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> height <span class="sc">*</span> <span class="fl">2.54</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> weight <span class="sc">*</span> <span class="fl">0.4536</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="changing-the-reference-for-factors" class="level3" data-number="1.11.4">
<h3 data-number="1.11.4" class="anchored" data-anchor-id="changing-the-reference-for-factors"><span class="header-section-number">1.11.4</span> Changing the reference for factors</h3>
<p>First, check the reference level for the variable <code>dib_pat</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(wcgs<span class="sc">$</span>dib_pat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "B" "A"</code></pre>
</div>
</div>
<p>It would make more sense to have <code>A</code> as our reference category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dib_pat =</span> <span class="fu">relevel</span>(dib_pat, <span class="at">ref =</span> <span class="st">"A"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="labels-1" class="level3" data-number="1.11.5">
<h3 data-number="1.11.5" class="anchored" data-anchor-id="labels-1"><span class="header-section-number">1.11.5</span> Labels</h3>
<p>It is also helpful to add labels to variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var_labels</span>(</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span>  <span class="st">"Age (years)"</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="st">"Height (cm)"</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">weight =</span> <span class="st">"Weight (kg)"</span>,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sbp =</span> <span class="st">"SBP (mm Hg)"</span>,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">dbp =</span> <span class="st">"DBP (mm Hg)"</span>,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">chol =</span> <span class="st">"Cholesterol (mg/dl)"</span>,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">beh_pat =</span> <span class="st">"Behaviour pattern"</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncigs =</span> <span class="st">"Cigarettes (n/day)"</span>,</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">dib_pat =</span> <span class="st">"Dichotomous behaviour"</span>,</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">chd =</span> <span class="st">"Coronary Heart Disease"</span>,</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">type_chd =</span> <span class="st">"Type of CHD"</span>,</span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">time =</span> <span class="st">"Follow up time (days)"</span>,</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">arcus =</span> <span class="st">"Corneal arcus"</span>,</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">smoker =</span> <span class="st">"Smoking status"</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p><strong>Exercise:</strong> Take a <em>glimpse</em> of your new data frame and save it as <code>wcgs.rds</code> file for further use.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 3,154
Columns: 15
$ id       &lt;int&gt; 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2…
$ age      &lt;int&gt; 49, 42, 42, 41, 59, 44, 44, 40, 43, 42, 53, 41, 50, 43, 44, 5…
$ height   &lt;dbl&gt; 185.42, 177.80, 175.26, 172.72, 177.80, 182.88, 182.88, 180.3…
$ weight   &lt;dbl&gt; 68.0400, 72.5760, 72.5760, 68.9472, 68.0400, 92.5344, 74.3904…
$ sbp      &lt;int&gt; 110, 154, 110, 124, 144, 150, 130, 138, 146, 132, 146, 138, 1…
$ dbp      &lt;int&gt; 76, 84, 78, 78, 86, 90, 84, 60, 76, 90, 94, 96, 90, 80, 80, 8…
$ chol     &lt;int&gt; 225, 177, 181, 132, 255, 182, 155, 140, 149, 325, 223, 271, 2…
$ beh_pat  &lt;fct&gt; A2, A2, B3, B4, B3, B4, B4, A2, B3, A2, A2, A2, A1, B3, B3, B…
$ ncigs    &lt;int&gt; 25, 20, 0, 20, 20, 0, 0, 0, 25, 0, 25, 20, 50, 30, 0, 3, 9, 0…
$ dib_pat  &lt;fct&gt; A, A, B, B, B, B, B, A, B, A, A, A, A, B, B, B, B, A, B, A, A…
$ chd      &lt;fct&gt; No CHD, No CHD, No CHD, No CHD, CHD, No CHD, No CHD, No CHD, …
$ type_chd &lt;fct&gt; No CHD, No CHD, No CHD, No CHD, MI or SD, No CHD, No CHD, No …
$ time     &lt;int&gt; 1664, 3071, 3071, 3064, 1885, 3102, 3074, 3071, 3064, 1032, 3…
$ arcus    &lt;fct&gt; Absent, Present, Absent, Absent, Present, Absent, Absent, Abs…
$ smoker   &lt;fct&gt; Smoker, Smoker, Non-Smoker, Smoker, Smoker, Non-Smoker, Non-S…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(wcgs, <span class="st">"data/wcgs.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="indexing-and-subsets" class="level3" data-number="1.11.6">
<h3 data-number="1.11.6" class="anchored" data-anchor-id="indexing-and-subsets"><span class="header-section-number">1.11.6</span> Indexing and subsets</h3>
<p>Let’s said that we are only interested in subjects who are smokers. If that is the case, we can create a new data frame:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>smokers <span class="ot">=</span> wcgs <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(smoker <span class="sc">==</span> <span class="st">"Smoker"</span>) <span class="sc">|&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">copy_labels</span>(wcgs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we are making comparisons, we use double equals; single equals in <code>R</code> are used for assignments and double ones for comparisons. For comparing against a character, we have to use single or double quotes (as shown in code above); numbers are not quoted.</p>
</div>
</div>
<p>One way to check that we did not make a terrible mistake, is to check for the number of observations. The number of observations on a data frame is, most of the time, equal to the number of rows (<code>nrow</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3154</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>smokers <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1502</code></pre>
</div>
</div>
<p>The function <code>nrow</code> works on <em>arrays</em>, i.e., data frames and matrices. For vectors, we use the function <code>length</code> instead. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(wcgs<span class="sc">$</span>smoker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3154</code></pre>
</div>
</div>
<p>Another important concept is that of <em>indexing</em>. For indexing, we write the conditional inside square brackets. For example, another way to look at the number of smokers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(wcgs<span class="sc">$</span>smoker[wcgs<span class="sc">$</span>smoker <span class="sc">==</span> <span class="st">"Smoker"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1502</code></pre>
</div>
</div>
<p>Using <code>with</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(wcgs, <span class="fu">length</span>(smoker[smoker <span class="sc">==</span> <span class="st">"Smoker"</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1502</code></pre>
</div>
</div>
<p>Using a pipe-workflow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> <span class="fu">count</span>(smoker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  smoker         n
  &lt;fct&gt;      &lt;int&gt;
1 Non-Smoker  1652
2 Smoker      1502</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> <span class="fu">frq</span>(smoker) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Smoking status (smoker) &lt;categorical&gt; 
# total N=3154 valid N=3154 mean=1.48 sd=0.50

Value      |    N | Raw % | Valid % | Cum. %
--------------------------------------------
Non-Smoker | 1652 | 52.38 |   52.38 |  52.38
Smoker     | 1502 | 47.62 |   47.62 | 100.00
&lt;NA&gt;       |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> <span class="fu">freq_table</span>(smoker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  smoker         n  prop
  &lt;fct&gt;      &lt;int&gt; &lt;dbl&gt;
1 Non-Smoker  1652  52.4
2 Smoker      1502  47.6</code></pre>
</div>
</div>
<p>Suppose we want to know the number of smokers who weight 100 kg or more:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;=</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(smoker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  smoker         n
  &lt;fct&gt;      &lt;int&gt;
1 Non-Smoker    28
2 Smoker        20</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>smokers <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;=</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    20</code></pre>
</div>
</div>
<p>For obtaining the same result, but working on the original dataset, we would need to use two conditionals. We use the symbol <code>&amp;</code> for <strong>AND</strong> and the symbol <code>|</code> for <strong>OR</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">&amp;</span> smoker <span class="sc">==</span> <span class="st">"Smoker"</span>) <span class="sc">|&gt;</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    20</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Exercise:</strong> Determine the number of smokers who have behavioural pattern <code>A2</code> and had either angina or silent myocardial infarction. You will need to write the <strong>OR</strong> conditionals between parenthesis.</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>smokers <span class="sc">|&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(beh_pat <span class="sc">==</span> <span class="st">"A2"</span> <span class="sc">&amp;</span> (type_chd <span class="sc">==</span> <span class="st">"Angina"</span> <span class="sc">|</span> type_chd <span class="sc">==</span> <span class="st">"Silent MI"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    38</code></pre>
</div>
</div>
<p>It’s possible to answer the exercise using <code>%in%</code> which is a variant of the <code>match</code> command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>smokers <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(beh_pat <span class="sc">==</span> <span class="st">"A2"</span> <span class="sc">&amp;</span> type_chd <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Angina"</span>, <span class="st">"Silent MI"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      n
  &lt;int&gt;
1    38</code></pre>
</div>
</div>
<p>Let’s say we want to know all the variable values for the subject who has the maximum weight. The function <code>which</code> gives us the position for where the given condition is true. I will assign the result to a variable named <code>pos</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>pos <span class="ot">=</span> wcgs <span class="sc">%$%</span> <span class="fu">which</span>(weight <span class="sc">==</span> <span class="fu">max</span>(weight))</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>pos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1094</code></pre>
</div>
</div>
<p>Alternatively, we can use <code>which.max</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">%$%</span> <span class="fu">which.max</span>(weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1094</code></pre>
</div>
</div>
<p>For indexing arrays, we use square brackets. The first number refers to the row and the second to the column. If one of them is missing, that means we are asking for all the values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>wcgs[pos, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 15
     id   age height weight   sbp   dbp  chol beh_pat ncigs dib_pat chd  
  &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;fct&gt;   &lt;fct&gt;
1 10078    43   193.   145.   166   102   188 B3          0 B       CHD  
# ℹ 4 more variables: type_chd &lt;fct&gt;, time &lt;int&gt;, arcus &lt;fct&gt;, smoker &lt;fct&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>wcgs <span class="sc">|&gt;</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">==</span> id[pos])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 15
     id   age height weight   sbp   dbp  chol beh_pat ncigs dib_pat chd  
  &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;fct&gt;   &lt;int&gt; &lt;fct&gt;   &lt;fct&gt;
1 10078    43   193.   145.   166   102   188 B3          0 B       CHD  
# ℹ 4 more variables: type_chd &lt;fct&gt;, time &lt;int&gt;, arcus &lt;fct&gt;, smoker &lt;fct&gt;</code></pre>
</div>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-pubh" class="csl-entry" role="listitem">
Athens, J. (2020), <em><a href="https://github.com/josie-athens/pubh"><span class="nocase">pubh: A Toolbox for Public Health and Epidemiology</span></a></em>.
</div>
<div id="ref-iswr" class="csl-entry" role="listitem">
Dalgaard, P. (2008), <em>Introductory statistics with r</em>, Springer.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./preface.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./descriptives.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Descriptive Statistics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">© Copyright 2023, Josie Athens. All rights reserved.</div>
  </div>
</footer>



</body></html>